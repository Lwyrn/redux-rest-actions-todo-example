(this["webpackJsonpredux-rest-actions-todo-example"]=this["webpackJsonpredux-rest-actions-todo-example"]||[]).push([[0],{104:function(e,t,a){e.exports=a(162)},128:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t),a.d(t,"mockServer",(function(){return o}));var n=a(29),r=a(15);function o(){var e=4,t=[{id:"1",content:"Learn React",completed:!1},{id:"2",content:"Learn Redux",completed:!1},{id:"3",content:"Build an app",completed:!1}],a=200,o=201,c=404;function l(e){var t=e.url.split("/");return 4===t.length?t[3]:""}r.api.mockAdapter.onGet(/\/api\/todos\/*\d*/).reply((function(e){return l(e)?function(e){var n=l(e),r=null;return t.forEach((function(e){e.id===n&&(r=e)})),r?[a,r]:[c]}(e):function(e){var n=[].concat(t);console.log("query ===> ".concat(JSON.stringify(e.params)));var r="all";return e.params&&e.params.visibility&&(r=e.params.visibility),n=n.filter((function(e){return"all"===r||(!("completed"!==r||!e.completed)||"not_completed"===r&&!e.completed)})),e.params&&e.params.search&&(n=n.filter((function(t){var a=e.params.search.toLowerCase();return t.content.toLowerCase().indexOf(a)>=0}))),[a,{todos:n}]}(e)})),r.api.mockAdapter.onPost("/api/todos").reply((function(a){var r=Object(n.a)({},JSON.parse(a.data));return r.id=String(e++),t.push(r),[o,r]})),r.api.mockAdapter.onPut(/\/api\/todos\/\d+/).reply((function(e){var n=l(e),r=t.findIndex((function(e){return e.id===n}));if(-1===r)return[c];var o=JSON.parse(e.data);return t.splice(r,1,o),[a,o]})),r.api.mockAdapter.onDelete(/\/api\/todos\/\d+/).reply((function(e){var n=l(e),r=t.findIndex((function(e){return e.id===n}));return-1===r?[c]:(t.splice(r,1),[a,{id:n}])}))}t.default=o},162:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),l=a(55),i=a(15),d=a(45),u=a(33),s=a(203),m=a(4),p=a.n(m),b=(p.a.shape({id:p.a.string,content:p.a.string,completed:p.a.bool}),p.a.shape({visibility:p.a.string,searchFilter:p.a.string}),a(29)),O=a(21),E=a(202),f=a(196),v=a(163),g=a(198),j=a(200),T=a(206),h=a(205),C=a(201),y=a(88),_=a.n(y),D=a(199),S=a(85),k=a.n(S),A=a(86),R=a.n(A),P=a(193),L=a(87),w=a.n(L),x=a(60),F=a.n(x),U="all",N="completed",G="not_completed";var B=function(e){var t={visibility:e.visibility};return e.search&&(t.search=e.search),F.a.stringify(t)},I=function(e){var t=F.a.parse(e),a={};return t?(a.search=t.search||"",a.visibility=function(e){if(!e)return U;if("string"!==typeof e)return U;var t=e.toLocaleLowerCase();return t===U||t===N||t===G?t:U}(t.visibility),a):{visibility:U,search:""}};var M=function(e){var t=e.filters,a=t.visibility,n=t.search,o="You have nothing to do!";return a===G?(o="You have no uncompleted items",n&&(o+=" that match your search")):a===N?(o="You have no completed items",n&&(o+=" that match your search")):n&&(o="You have nothing to do that matches your search"),r.a.createElement(s.a,{mt:"2em"},o)};var J=function(e){var t=e.error,a=e.retry;return r.a.createElement(s.a,{mt:"1em",color:"red"},t,a&&r.a.createElement(s.a,{m:"1em"},r.a.createElement(P.a,{onClick:a,variant:"contained"},"Retry")))},K=a(91),W=a(197);var Y=function(e){var t=e.onChange,a=Object(n.useState)(null),o=Object(O.a)(a,2),c=o[0],l=o[1],i=Object(n.useCallback)((function(e){l(e.currentTarget)}),[]),d=Object(n.useCallback)((function(e){l(null),t(e.target.id)}),[t]);return r.a.createElement(s.a,{component:e.component},r.a.createElement(P.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:i},e.label),r.a.createElement(K.a,{anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:d},e.items.map((function(t){return r.a.createElement(W.a,{id:t.value,key:t.value,selected:t.value===e.selected,onClick:d},t.display)}))))};var z=function(e){var t=e.getTodos,a=e.visibility,o=e.searchFilter,c=e.updateFilters,l=e.addTodo,i=e.updateTodo,d=e.pending,m=e.updatePending,p=e.todos,y=e.error,S=e.filters,A=Object(n.useState)(""),L=Object(O.a)(A,2),x=L[0],F=L[1],U=Object(n.useState)(""),B=Object(O.a)(U,2),K=B[0],W=B[1],z=Object(u.f)();Object(n.useEffect)((function(){var e=I(window.location.search);c(e,z),t(e)}),[]);var V,q=Object(n.useCallback)((function(e){z.push("/delete/".concat(e))}),[z]),$=Object(n.useCallback)((function(e){var a=Object(b.a)({},S,{visibility:e});c(a,z),t(a)}),[t,S,c,z]),H=Object(n.useCallback)((function(e){var a=Object(b.a)({},S,{search:e.target.value});c(a,z),t(a)}),[t,S,c,z]),Q=Object(n.useCallback)((function(e){z.push("/edit/".concat(e))}),[z]),X=Object(n.useCallback)((function(e){W("update"),i(e.id,Object(b.a)({},e,{completed:!e.completed})).then((function(e){e&&t(S)}))}),[t,S,i]),Z=Object(n.useCallback)((function(){t(S)}),[t,S]),ee=Object(n.useCallback)((function(e){F(e.target.value)}),[]),te=Object(n.useCallback)((function(){var e=x.trim();e&&(W("add"),l({content:e}).then((function(e){e&&(F(""),t(S))})))}),[l,x,t,S]),ae=Object(n.useCallback)((function(e){"Enter"===e.key&&te()}),[te]),ne=Object(n.useMemo)((function(){return d||m}),[d,m]),re=Object(n.useMemo)((function(){return p?(p.length?null:r.a.createElement(M,{filters:S}))||r.a.createElement(f.a,null,p.map((function(e){return r.a.createElement(v.a,{key:e.id,divider:!0},r.a.createElement(g.a,null,r.a.createElement(T.a,{disableRipple:!0,edge:"start",disabled:ne,checked:e.completed,tabIndex:-1,onChange:X.bind(null,e)})),r.a.createElement(j.a,{primary:e.content}),r.a.createElement(s.a,{component:"span",ml:"1em"},r.a.createElement(D.a,{"aria-label":"edit",onClick:Q.bind(null,e.id),disabled:ne},r.a.createElement(k.a,null))),r.a.createElement(D.a,{"aria-label":"delete",onClick:q.bind(null,e.id),disabled:ne},r.a.createElement(R.a,null)))}))):null}),[p,ne,q,Q,X,S]),oe=null;return e.updateError&&(oe="add"===K?"Error adding TODO":"Error updating TODO"),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,"Todo List")),r.a.createElement("div",{className:"toolbar"},r.a.createElement(h.a,{id:"add-todo",variant:"outlined",placeholder:"Add a new TODO item",value:x,onChange:ee,disabled:ne,onKeyPress:ae,autoComplete:"off",size:"small"}),r.a.createElement(s.a,{component:"span",ml:"1em",mr:"1em"},r.a.createElement(P.a,{variant:"contained",color:"primary",disabled:ne,onClick:te},r.a.createElement(w.a,null))),r.a.createElement("div",{className:"visibilityFilter"},"Showing: ",(V=a)===G?"Not completed":V===N?"Completed":"All",r.a.createElement(Y,{label:"Change Filter",items:[{value:"all",display:"All"},{value:"completed",display:"Completed"},{value:"not_completed",display:"Not completed"}],onChange:$,component:"span",selected:a})),r.a.createElement(h.a,{id:"search-todo",variant:"outlined",placeholder:"Search",value:o,onChange:H,autoComplete:"off",size:"small",InputProps:{endAdornment:r.a.createElement(C.a,{position:"end"},r.a.createElement(_.a,null))}}),r.a.createElement(s.a,{component:"span",ml:"1em"},ne&&r.a.createElement(E.a,{color:"secondary"}))),oe&&r.a.createElement(J,{error:oe}),y&&r.a.createElement(J,{retry:Z,error:y.toString()}),re)};var V=function(e){var t=e.getTodo,a=e.updateTodo,o=e.updateError,c=e.updatePending,l=Object(u.f)(),i=Object(u.g)("id").id,d=Object(n.useState)(null),m=Object(O.a)(d,2),p=m[0],b=m[1],f=Object(n.useState)(!1),v=Object(O.a)(f,2),g=v[0],j=v[1],T=Object(n.useState)(null),C=Object(O.a)(T,2),y=C[0],_=C[1];Object(n.useEffect)((function(){t(i).then((function(e){e?(b(e.content),j(e.completed)):_("Failed to retrieve TODO")}))}),[]);var D=Object(n.useCallback)((function(){l.push("/")}),[l]),S=Object(n.useCallback)((function(){a(i,{id:i,content:p,completed:g}).then((function(e){null!==e&&l.push("/")}))}),[a,l,i,p,g]),k=Object(n.useCallback)((function(e){b(e.target.value)}),[b]);if(c)return r.a.createElement(E.a,null);var A=null;return y?A="Error retrieving TODO":o&&(A=o.toString()),A?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Unable to Edit TODO"),r.a.createElement(s.a,{color:"red",mb:"1em"},A),r.a.createElement(P.a,{variant:"contained",onClick:D},"BACK")):null===p?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Edit Todo"),r.a.createElement(s.a,{mt:"1em",mb:"1em"},r.a.createElement(h.a,{id:"edit-todo",variant:"outlined",autoComplete:"off",onChange:k,value:p})),r.a.createElement(s.a,{mt:"1em",mb:"1em"},r.a.createElement(P.a,{variant:"contained",onClick:D},"Cancel"),r.a.createElement(s.a,{component:"span",ml:"1em"},r.a.createElement(P.a,{variant:"contained",color:"primary",onClick:S,disabled:!p},"Save"))))},q=a(195);var $=function(e){return r.a.createElement(s.a,{mt:"1em"},r.a.createElement(s.a,{mb:"1em"},e.children),r.a.createElement(P.a,{variant:"contained",onClick:e.onCancel},"Cancel"),r.a.createElement(s.a,{component:"span",ml:"1em"},r.a.createElement(P.a,{variant:"contained",color:"primary",onClick:e.onConfirm},"Delete")))};var H=function(e){var t=e.getTodo,a=e.deleteTodo,o=e.updatePending,c=e.updateError,l=Object(u.f)(),i=Object(u.g)("id").id,d=Object(n.useState)(null),m=Object(O.a)(d,2),p=m[0],b=m[1],f=Object(n.useState)(null),v=Object(O.a)(f,2),g=v[0],j=v[1];Object(n.useEffect)((function(){t(i).then((function(e){e?b(e):j("Failed to retrieve TODO")}))}),[]);var T=Object(n.useCallback)((function(){l.push("/")}),[l]),h=Object(n.useCallback)((function(){a(i).then((function(e){null!==e&&l.push("/")}))}),[l,i,a]);if(o)return r.a.createElement(E.a,null);var C=null;return g?C=g:c&&(C=c.toString()),C?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Unable to Delete TODO"),r.a.createElement(s.a,{color:"red",mb:"1em"},C),r.a.createElement(P.a,{variant:"contained",onClick:T},"BACK")):p?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{mb:"1em"},r.a.createElement("div",null,"Delete TODO"),r.a.createElement($,{onCancel:T,onConfirm:h},r.a.createElement("p",{className:"warning"},"Are you sure you want to delete TODO:"),r.a.createElement(q.a,null,r.a.createElement(s.a,{p:"1em"},p.content," ",p.completed?"(completed)":"(not completed)"))))):null},Q="";Q="/redux-rest-actions-todo-example";var X=function(e){return r.a.createElement(s.a,{m:"1em",className:"todoapp"},r.a.createElement(d.a,{basename:Q},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(z,{getTodos:e.getTodos,addTodo:e.addTodo,error:e.listError,updateError:e.updateError,updateTodo:e.updateTodo,deleteTodo:e.deleteTodo,todos:e.todos,pending:e.pending,updatePending:e.updatePending,visibility:e.visibility,searchFilter:e.searchFilter,updateFilters:e.updateFilters,filters:e.filters})),r.a.createElement(u.a,{exact:!0,path:"/edit/:id"},r.a.createElement(V,{getTodo:e.getTodo,updateTodo:e.updateTodo,updateError:e.updateError,updatePending:e.updatePending})),r.a.createElement(u.a,{exact:!0,path:"/delete/:id"},r.a.createElement(H,{getTodo:e.getTodo,deleteTodo:e.deleteTodo,updateError:e.updateError,updatePending:e.updatePending,todo:e.todo})))))},Z=a(9),ee=Object(Z.b)("GET_TODOS",(function(e){return e?{payload:{params:Object(b.a)({},e)}}:{}})),te=Object(Z.b)("GET_TODOS_SUCCESS"),ae=Object(Z.b)("GET_TODOS_ERROR"),ne=Object(Z.b)("GET_TODO",(function(e){return{payload:{id:e}}})),re=Object(Z.b)("GET_TODO_SUCCESS"),oe=Object(Z.b)("GET_TODO_ERROR"),ce=Object(Z.b)("ADD_TODO",(function(e){return{payload:{data:Object(b.a)({},e,{completed:!1})}}})),le=Object(Z.b)("ADD_TODO_SUCCESS"),ie=Object(Z.b)("ADD_TODO_ERROR"),de=Object(Z.b)("UPDATE_TODO",(function(e,t){return{payload:{id:e,data:t}}})),ue=Object(Z.b)("UPDATE_TODO_SUCCESS"),se=Object(Z.b)("UPDATE_TODO_ERROR"),me=Object(Z.b)("DELETE_TODO",(function(e){return{payload:{id:e}}})),pe=Object(Z.b)("DELETE_TODO_SUCCESS"),be=Object(Z.b)("DELETE_TODO_ERROR"),Oe=Object(Z.b)("SET_FILTERS"),Ee=function(e){return e.list.todos},fe=function(e){return e.list.error},ve=function(e){return e.list.pending},ge=function(e){return e.update.pending},je=function(e){return e.update.error},Te=function(e){return e.update.todo},he=function(e){return e.filters},Ce=function(e){return e.filters.visibility},ye=function(e){return e.filters.search};var _e,De=Object(l.b)((function(e){return{todos:Ee(e),todo:Te(e),listError:fe(e),pending:ve(e),updatePending:ge(e),updateError:je(e),visibility:Ce(e),searchFilter:ye(e),filters:he(e)}}),{updateFilters:function(e,t){return function(a){a(Oe(e)),t.push({search:B(e)})}}})((function(e){return r.a.createElement(X,Object.assign({},e,{getTodos:i.api.getTodos,getTodo:i.api.getTodo,addTodo:i.api.addTodo,updateTodo:i.api.updateTodo,deleteTodo:i.api.deleteTodo}))})),Se=(a(128),a(18)),ke=a(12);function Ae(e){e.pending=!0,e.error=null}function Re(e,t){console.log("ERROR: ".concat(t.payload.toString())),e.pending=!1,e.error=t.payload}var Pe,Le=Object(Z.c)({todos:null,pending:!1,error:null},(_e={},Object(ke.a)(_e,ee,(function(e){Ae(e)})),Object(ke.a)(_e,te,(function(e,t){e.pending=!1,e.todos=t.payload.todos})),Object(ke.a)(_e,le,(function(e){e.pending=!1})),Object(ke.a)(_e,pe,(function(e){e.pending=!1})),Object(ke.a)(_e,ue,(function(e){e.pending=!1})),Object(ke.a)(_e,ae,(function(e,t){Re(e,t)})),_e)),we=Object(Z.c)({pending:!1,error:null},(Pe={},Object(ke.a)(Pe,ne,(function(e){e.error=null})),Object(ke.a)(Pe,ce,(function(e){Ae(e)})),Object(ke.a)(Pe,le,(function(e){e.pending=!1})),Object(ke.a)(Pe,ie,(function(e,t){Re(e,t)})),Object(ke.a)(Pe,de,(function(e){Ae(e)})),Object(ke.a)(Pe,ue,(function(e){e.pending=!1})),Object(ke.a)(Pe,se,(function(e,t){Re(e,t)})),Object(ke.a)(Pe,me,(function(e){Ae(e)})),Object(ke.a)(Pe,pe,(function(e){e.pending=!1})),Object(ke.a)(Pe,be,(function(e,t){Re(e,t)})),Pe)),xe={search:"",visibility:U},Fe=Object(Z.c)(xe,Object(ke.a)({},Oe,(function(e,t){return t.payload}))),Ue=Object(Se.combineReducers)({list:Le,update:we,filters:Fe}),Ne=a(90),Ge=a.n(Ne),Be=a(46),Ie={};Ie.mockAdapter=Ge.a,Ie.mockDelay=500,Ie.enableTracing=!0;var Me="";Object({NODE_ENV:"production",PUBLIC_URL:"/redux-rest-actions-todo-example",REACT_APP_USE_MOCK_DATA:"true",REACT_APP_ENABLE_MIDDLEWARE_LOGGING:"true"}).REACT_APP_BASE_URL&&(Me=Object({NODE_ENV:"production",PUBLIC_URL:"/redux-rest-actions-todo-example",REACT_APP_USE_MOCK_DATA:"true",REACT_APP_ENABLE_MIDDLEWARE_LOGGING:"true"}).REACT_APP_BASE_URL);var Je=Object(i.configureApiMiddleware)({baseURL:Me},Ie);var Ke,We={getTodos:{url:"/api/todos",actions:[ee,te,ae]},getTodo:{url:"/api/todos/:id",actions:[ne,re,oe]},addTodo:{url:"/api/todos",actions:[ce,le,ie]},updateTodo:{url:"/api/todos/:id",actions:[de,ue,se]},deleteTodo:{url:"/api/todos/:id",actions:[me,pe,be]}},Ye=Object(Z.a)({reducer:Ue,middleware:[Je,Be.a],preloadedState:Ke});Object(i.configureApi)(Ye,We),(0,a(161).default)();var ze=function(){return r.a.createElement(l.a,{store:Ye},r.a.createElement(De,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ze,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[104,1,2]]]);
//# sourceMappingURL=main.799bc186.chunk.js.map