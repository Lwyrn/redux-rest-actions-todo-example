(this["webpackJsonpredux-rest-actions-todo-example"]=this["webpackJsonpredux-rest-actions-todo-example"]||[]).push([[0],{104:function(e,t,a){e.exports=a(162)},128:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t),a.d(t,"mockServer",(function(){return r}));var n=a(29),o=a(15);function r(){var e=4,t=[{id:"1",content:"Learn React",completed:!1},{id:"2",content:"Learn Redux",completed:!1},{id:"3",content:"Build an app",completed:!1}],a=200,r=201,c=404;function l(e){var t=e.url.split("/");return 4===t.length?t[3]:""}o.api.mockAdapter.onGet(/\/api\/todos\/*\d*/).reply((function(e){return l(e)?function(e){var n=l(e),o=null;return t.forEach((function(e){e.id===n&&(o=e)})),o?[a,o]:[c]}(e):function(e){var n=[].concat(t);console.log("query ===> ".concat(JSON.stringify(e.params)));var o="all";return e.params&&e.params.filters&&e.params.filters.visibility&&(o=e.params.filters.visibility),n=n.filter((function(e){return"all"===o||(!("completed"!==o||!e.completed)||"not_completed"===o&&!e.completed)})),e.params&&e.params.filters&&e.params.filters.search&&(n=n.filter((function(t){var a=e.params.filters.search.toLowerCase();return t.content.toLowerCase().indexOf(a)>=0}))),[a,{todos:n}]}(e)})),o.api.mockAdapter.onPost("/api/todos").reply((function(a){var o=Object(n.a)({},JSON.parse(a.data));return o.id=String(e++),t.push(o),[r,o]})),o.api.mockAdapter.onPut(/\/api\/todos\/\d+/).reply((function(e){var n=l(e),o=t.findIndex((function(e){return e.id===n}));if(-1===o)return[c];var r=JSON.parse(e.data);return t.splice(o,1,r),[a,r]})),o.api.mockAdapter.onDelete(/\/api\/todos\/\d+/).reply((function(e){var n=l(e),o=t.findIndex((function(e){return e.id===n}));return-1===o?[c]:(t.splice(o,1),[a,{id:n}])}))}t.default=r},162:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),c=a.n(r),l=a(55),i=a(15),d=a(45),u=a(33),s=a(203),m=a(4),p=a.n(m),b=(p.a.shape({id:p.a.string,content:p.a.string,completed:p.a.bool}),p.a.shape({visibility:p.a.string,searchFilter:p.a.string}),a(29)),O=a(21),E=a(202),f=a(196),v=a(163),h=a(198),g=a(200),j=a(206),T=a(205),C=a(201),y=a(88),_=a.n(y),D=a(199),S=a(85),k=a.n(S),A=a(86),R=a.n(A),P=a(193),L=a(87),U=a.n(L),x=a(60),w=a.n(x),F="all",N="completed",B="not_completed";var I=function(e){var t={visibility:e.visibility};return e.search&&(t.search=e.search),w.a.stringify(t)},G=function(e){var t=w.a.parse(e),a={};return t?(a.search=t.search||"",a.visibility=function(e){if(!e)return F;if("string"!==typeof e)return F;var t=e.toLocaleLowerCase();return t===F||t===N||t===B?t:F}(t.visibility),a):{visibility:F,search:""}};var M=function(e){var t=e.filters,a=t.visibility,n=t.search,r="You have nothing to do!";return a===B?(r="You have no uncompleted items",n&&(r+=" that match your search")):a===N?(r="You have no completed items",n&&(r+=" that match your search")):n&&(r="You have nothing to do that matches your search"),o.a.createElement(s.a,{mt:"2em"},r)};var J=function(e){var t=e.error,a=e.retry;return o.a.createElement(s.a,{mt:"1em",color:"red"},t,a&&o.a.createElement(s.a,{m:"1em"},o.a.createElement(P.a,{onClick:a,variant:"contained"},"Retry")))},K=a(91),Y=a(197);var V=function(e){var t=e.onChange,a=Object(n.useState)(null),r=Object(O.a)(a,2),c=r[0],l=r[1],i=Object(n.useCallback)((function(e){l(e.currentTarget)}),[]),d=Object(n.useCallback)((function(e){l(null),t(e.target.id)}),[t]);return o.a.createElement(s.a,{component:e.component},o.a.createElement(P.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:i},e.label),o.a.createElement(K.a,{anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:d},e.items.map((function(t){return o.a.createElement(Y.a,{id:t.value,key:t.value,selected:t.value===e.selected,onClick:d},t.display)}))))};var W=function(e){var t=e.getTodos,a=e.visibility,r=e.searchFilter,c=e.updateFilters,l=e.addTodo,i=e.updateTodo,d=e.pending,m=e.updatePending,p=e.todos,y=e.error,S=e.filters,A=Object(n.useState)(""),L=Object(O.a)(A,2),x=L[0],w=L[1],F=Object(n.useState)(""),I=Object(O.a)(F,2),K=I[0],Y=I[1],W=Object(u.f)();Object(n.useEffect)((function(){var e=G(window.location.search);c(e,W),t(e)}),[]);var z,q=Object(n.useCallback)((function(e){W.push("/delete/".concat(e))}),[W]),$=Object(n.useCallback)((function(e){var a=Object(b.a)({},S,{visibility:e});c(a,W),t(a)}),[t,S,c,W]),H=Object(n.useCallback)((function(e){var a=Object(b.a)({},S,{search:e.target.value});c(a,W),t(a)}),[t,S,c,W]),Q=Object(n.useCallback)((function(e){W.push("/edit/".concat(e))}),[W]),X=Object(n.useCallback)((function(e){Y("update"),i(e.id,Object(b.a)({},e,{completed:!e.completed})).then((function(e){e&&t(S)}))}),[t,S,i]),Z=Object(n.useCallback)((function(){t(S)}),[t,S]),ee=Object(n.useCallback)((function(e){w(e.target.value)}),[]),te=Object(n.useCallback)((function(){var e=x.trim();e&&(Y("add"),l({content:e}).then((function(e){e&&(w(""),t(S))})))}),[l,x,t,S]),ae=Object(n.useCallback)((function(e){"Enter"===e.key&&te()}),[te]),ne=Object(n.useMemo)((function(){return d||m}),[d,m]),oe=Object(n.useMemo)((function(){return p?(p.length?null:o.a.createElement(M,{filters:S}))||o.a.createElement(f.a,null,p.map((function(e){return o.a.createElement(v.a,{key:e.id,divider:!0},o.a.createElement(h.a,null,o.a.createElement(j.a,{disableRipple:!0,edge:"start",disabled:ne,checked:e.completed,tabIndex:-1,onChange:X.bind(null,e)})),o.a.createElement(g.a,{primary:e.content}),o.a.createElement(s.a,{component:"span",ml:"1em"},o.a.createElement(D.a,{"aria-label":"edit",onClick:Q.bind(null,e.id),disabled:ne},o.a.createElement(k.a,null))),o.a.createElement(D.a,{"aria-label":"delete",onClick:q.bind(null,e.id),disabled:ne},o.a.createElement(R.a,null)))}))):null}),[p,ne,q,Q,X,S]),re=null;return e.updateError&&(re="add"===K?"Error adding TODO":"Error updating TODO"),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"header"},o.a.createElement("h2",null,"Todo List")),o.a.createElement("div",{className:"toolbar"},o.a.createElement(T.a,{id:"add-todo",variant:"outlined",placeholder:"Add a new TODO item",value:x,onChange:ee,disabled:ne,onKeyPress:ae,autoComplete:"off",size:"small"}),o.a.createElement(s.a,{component:"span",ml:"1em",mr:"1em"},o.a.createElement(P.a,{variant:"contained",color:"primary",disabled:ne,onClick:te},o.a.createElement(U.a,null))),o.a.createElement("div",{className:"visibilityFilter"},"Showing: ",(z=a)===B?"Not completed":z===N?"Completed":"All",o.a.createElement(V,{label:"Change Filter",items:[{value:"all",display:"All"},{value:"completed",display:"Completed"},{value:"not_completed",display:"Not completed"}],onChange:$,component:"span",selected:a})),o.a.createElement(T.a,{id:"search-todo",variant:"outlined",placeholder:"Search",value:r,onChange:H,autoComplete:"off",size:"small",InputProps:{endAdornment:o.a.createElement(C.a,{position:"end"},o.a.createElement(_.a,null))}}),o.a.createElement(s.a,{component:"span",ml:"1em"},ne&&o.a.createElement(E.a,{color:"secondary"}))),re&&o.a.createElement(J,{error:re}),y&&o.a.createElement(J,{retry:Z,error:y.toString()}),oe)};var z=function(e){var t=e.getTodo,a=e.updateTodo,r=e.updateError,c=e.updatePending,l=Object(u.f)(),i=Object(u.g)("id").id,d=Object(n.useState)(null),m=Object(O.a)(d,2),p=m[0],b=m[1],f=Object(n.useState)(!1),v=Object(O.a)(f,2),h=v[0],g=v[1],j=Object(n.useState)(null),C=Object(O.a)(j,2),y=C[0],_=C[1];Object(n.useEffect)((function(){t(i).then((function(e){e?(b(e.content),g(e.completed)):_("Failed to retrieve TODO")}))}),[]);var D=Object(n.useCallback)((function(){l.push("/")}),[l]),S=Object(n.useCallback)((function(){a(i,{id:i,content:p,completed:h}).then((function(e){null!==e&&l.push("/")}))}),[a,l,i,p,h]),k=Object(n.useCallback)((function(e){b(e.target.value)}),[b]);if(c)return o.a.createElement(E.a,null);var A=null;return y?A="Error retrieving TODO":r&&(A=r.toString()),A?o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,"Unable to Edit TODO"),o.a.createElement(s.a,{color:"red",mb:"1em"},A),o.a.createElement(P.a,{variant:"contained",onClick:D},"BACK")):p?o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Edit Todo"),o.a.createElement(s.a,{mt:"1em",mb:"1em"},o.a.createElement(T.a,{id:"edit-todo",variant:"outlined",autoComplete:"disable",onChange:k,value:p})),o.a.createElement(s.a,{mt:"1em",mb:"1em"},o.a.createElement(P.a,{variant:"contained",onClick:D},"Cancel"),o.a.createElement(s.a,{component:"span",ml:"1em"},o.a.createElement(P.a,{variant:"contained",color:"primary",onClick:S},"Save")))):null},q=a(195);var $=function(e){return o.a.createElement(s.a,{mt:"1em"},o.a.createElement(s.a,{mb:"1em"},e.children),o.a.createElement(P.a,{variant:"contained",onClick:e.onCancel},"Cancel"),o.a.createElement(s.a,{component:"span",ml:"1em"},o.a.createElement(P.a,{variant:"contained",color:"primary",onClick:e.onConfirm},"Delete")))};var H=function(e){var t=e.getTodo,a=e.deleteTodo,r=e.updatePending,c=e.updateError,l=Object(u.f)(),i=Object(u.g)("id").id,d=Object(n.useState)(null),m=Object(O.a)(d,2),p=m[0],b=m[1],f=Object(n.useState)(null),v=Object(O.a)(f,2),h=v[0],g=v[1];Object(n.useEffect)((function(){t(i).then((function(e){e?b(e):g("Failed to retrieve TODO")}))}),[]);var j=Object(n.useCallback)((function(){l.push("/")}),[l]),T=Object(n.useCallback)((function(){a(i).then((function(e){null!==e&&l.push("/")}))}),[l,i,a]);if(r)return o.a.createElement(E.a,null);var C=null;return h?C=h:c&&(C=c.toString()),C?o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Unable to Delete TODO"),o.a.createElement(s.a,{color:"red",mb:"1em"},C),o.a.createElement(P.a,{variant:"contained",onClick:j},"BACK")):p?o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{mb:"1em"},o.a.createElement("div",null,"Delete TODO"),o.a.createElement($,{onCancel:j,onConfirm:T},o.a.createElement("p",{className:"warning"},"Are you sure you want to delete TODO:"),o.a.createElement(q.a,null,o.a.createElement(s.a,{p:"1em"},p.content," ",p.completed?"(completed)":"(not completed)"))))):null},Q="";Q="/redux-rest-actions-todo-example";var X=function(e){return o.a.createElement(s.a,{m:"1em",className:"todoapp"},o.a.createElement(d.a,{basename:Q},o.a.createElement(u.c,null,o.a.createElement(u.a,{exact:!0,path:"/"},o.a.createElement(W,{getTodos:e.getTodos,addTodo:e.addTodo,error:e.listError,updateError:e.updateError,updateTodo:e.updateTodo,deleteTodo:e.deleteTodo,todos:e.todos,pending:e.pending,updatePending:e.updatePending,visibility:e.visibility,searchFilter:e.searchFilter,updateFilters:e.updateFilters,filters:e.filters})),o.a.createElement(u.a,{exact:!0,path:"/edit/:id"},o.a.createElement(z,{getTodo:e.getTodo,updateTodo:e.updateTodo,updateError:e.updateError,updatePending:e.updatePending})),o.a.createElement(u.a,{exact:!0,path:"/delete/:id"},o.a.createElement(H,{getTodo:e.getTodo,deleteTodo:e.deleteTodo,updateError:e.updateError,updatePending:e.updatePending,todo:e.todo})))))},Z=a(9),ee=Object(Z.b)("GET_TODOS",(function(e){return e?{payload:{params:Object(b.a)({},e)}}:{}})),te=Object(Z.b)("GET_TODOS_SUCCESS"),ae=Object(Z.b)("GET_TODOS_ERROR"),ne=Object(Z.b)("GET_TODO",(function(e){return{payload:{id:e}}})),oe=Object(Z.b)("GET_TODO_SUCCESS"),re=Object(Z.b)("GET_TODO_ERROR"),ce=Object(Z.b)("ADD_TODO",(function(e){return{payload:{data:Object(b.a)({},e,{completed:!1})}}})),le=Object(Z.b)("ADD_TODO_SUCCESS"),ie=Object(Z.b)("ADD_TODO_ERROR"),de=Object(Z.b)("UPDATE_TODO",(function(e,t){return{payload:{id:e,data:t}}})),ue=Object(Z.b)("UPDATE_TODO_SUCCESS"),se=Object(Z.b)("UPDATE_TODO_ERROR"),me=Object(Z.b)("DELETE_TODO",(function(e){return{payload:{id:e}}})),pe=Object(Z.b)("DELETE_TODO_SUCCESS"),be=Object(Z.b)("DELETE_TODO_ERROR"),Oe=Object(Z.b)("SET_FILTERS"),Ee=function(e){return e.list.todos},fe=function(e){return e.list.error},ve=function(e){return e.list.pending},he=function(e){return e.update.pending},ge=function(e){return e.update.error},je=function(e){return e.update.todo},Te=function(e){return e.filters},Ce=function(e){return e.filters.visibility},ye=function(e){return e.filters.search};var _e,De=Object(l.b)((function(e){return{todos:Ee(e),todo:je(e),listError:fe(e),pending:ve(e),updatePending:he(e),updateError:ge(e),visibility:Ce(e),searchFilter:ye(e),filters:Te(e)}}),{updateFilters:function(e,t){return function(a){a(Oe(e)),t.push({search:I(e)})}}})((function(e){return o.a.createElement(X,Object.assign({},e,{getTodos:i.api.getTodos,getTodo:i.api.getTodo,addTodo:i.api.addTodo,updateTodo:i.api.updateTodo,deleteTodo:i.api.deleteTodo}))})),Se=(a(128),a(18)),ke=a(12);function Ae(e){e.pending=!0,e.error=null}function Re(e,t){console.log("ERROR: ".concat(t.payload.toString())),e.pending=!1,e.error=t.payload}var Pe,Le=Object(Z.c)({todos:null,pending:!1,error:null},(_e={},Object(ke.a)(_e,ee,(function(e){Ae(e)})),Object(ke.a)(_e,te,(function(e,t){e.pending=!1,e.todos=t.payload.todos})),Object(ke.a)(_e,le,(function(e){e.pending=!1})),Object(ke.a)(_e,pe,(function(e){e.pending=!1})),Object(ke.a)(_e,ue,(function(e){e.pending=!1})),Object(ke.a)(_e,ae,(function(e,t){Re(e,t)})),_e)),Ue=Object(Z.c)({pending:!1,error:null},(Pe={},Object(ke.a)(Pe,ne,(function(e){e.error=null})),Object(ke.a)(Pe,ce,(function(e){Ae(e)})),Object(ke.a)(Pe,le,(function(e){e.pending=!1})),Object(ke.a)(Pe,ie,(function(e,t){Re(e,t)})),Object(ke.a)(Pe,de,(function(e){Ae(e)})),Object(ke.a)(Pe,ue,(function(e){e.pending=!1})),Object(ke.a)(Pe,se,(function(e,t){Re(e,t)})),Object(ke.a)(Pe,me,(function(e){Ae(e)})),Object(ke.a)(Pe,pe,(function(e){e.pending=!1})),Object(ke.a)(Pe,be,(function(e,t){Re(e,t)})),Pe)),xe={search:"",visibility:F},we=Object(Z.c)(xe,Object(ke.a)({},Oe,(function(e,t){return t.payload}))),Fe=Object(Se.combineReducers)({list:Le,update:Ue,filters:we}),Ne=a(90),Be=a.n(Ne),Ie=a(46),Ge={};Object({NODE_ENV:"production",PUBLIC_URL:"/redux-rest-actions-todo-example",REACT_APP_BASE_URL:"http://localhost:4000"}).REACT_APP_USE_MOCK_DATA&&(Ge.mockAdapter=Be.a,Ge.mockDelay=500),Object({NODE_ENV:"production",PUBLIC_URL:"/redux-rest-actions-todo-example",REACT_APP_BASE_URL:"http://localhost:4000"}).REACT_APP_ENABLE_MIDDLEWARE_LOGGING&&(Ge.enableTracing=!0);var Me="";Me="http://localhost:4000";var Je=Object(i.configureApiMiddleware)({baseURL:Me},Ge);var Ke,Ye={getTodos:{url:"/api/todos",actions:[ee,te,ae]},getTodo:{url:"/api/todos/:id",actions:[ne,oe,re]},addTodo:{url:"/api/todos",actions:[ce,le,ie]},updateTodo:{url:"/api/todos/:id",actions:[de,ue,se]},deleteTodo:{url:"/api/todos/:id",actions:[me,pe,be]}},Ve=Object(Z.a)({reducer:Fe,middleware:[Je,Ie.a],preloadedState:Ke});(Object(i.configureApi)(Ve,Ye),Object({NODE_ENV:"production",PUBLIC_URL:"/redux-rest-actions-todo-example",REACT_APP_BASE_URL:"http://localhost:4000"}).REACT_APP_USE_MOCK_DATA)&&(0,a(161).default)();var We=function(){return o.a.createElement(l.a,{store:Ve},o.a.createElement(De,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(We,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[104,1,2]]]);
//# sourceMappingURL=main.2cf76abf.chunk.js.map